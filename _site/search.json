[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "hmcranford.github.io",
    "section": "",
    "text": "library(conflicted)\nsuppressPackageStartupMessages(library(tidymodels))\ntidymodels_prefer()\nsuppressPackageStartupMessages(library(tidyverse))\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(viridis)\nlibrary(showtext)\nlibrary(ggtext)\nlibrary(waffle)\nlibrary(sysfonts)\n# Bring in CTN Datasets\neverybody &lt;- public.ctn0094data::everybody\ndemographics &lt;- public.ctn0094data::demographics\nrandomization &lt;- public.ctn0094data::randomization\nsex &lt;- public.ctn0094data::sex\nfagerstrom &lt;- public.ctn0094data::fagerstrom\npsychiatric &lt;- public.ctn0094data::psychiatric\ntlfb &lt;- public.ctn0094data::tlfb\nscreening_date &lt;- public.ctn0094data::screening_date\n# Create necessary datasets\nrandomization &lt;-\n  randomization |&gt; rename(\"when_random\"=\"when\")\n\nfirst_randomization &lt;-\n  randomization |&gt;\n  filter(which == 1)\n\nrandomized_project &lt;-\n  left_join(\n    first_randomization,\n    everybody,\n    demographics,\n    by = \"who\",\n    relationship = \"many-to-many\"\n  )\n\nrandomized_demo_project &lt;-\n  left_join(randomized_project,\n            demographics,\n            by = \"who\",\n            relationship = \"many-to-many\") |&gt;\n  subset(select = -which)\nsmoking &lt;-\n  left_join(randomized_demo_project,\n                     fagerstrom,\n                     by = \"who\",\n                     relationship = \"many-to-many\")\nsmoking_df &lt;-\n  smoking |&gt;\n  filter(!is.na(per_day))|&gt; # restrict 5 without smoking information\n  mutate(\n    smokestatus = case_when(\n      is_smoker == \"No\" ~ \"0\",\n      per_day == \"10 OR LESS\" ~ \"1\",\n      per_day == \"11-20\" ~ \"2\",\n      per_day == \"21-30\" ~ \"3\",\n      per_day == \"31 OR MORE\" ~ \"4\")\n    )|&gt;\n  count(project, smokestatus)\n# Figure 1\n## Loading Google fonts (https://fonts.google.com/)\nfont_add_google(\"Bebas Neue\", \"title_font\")\nfont_add_google(\"Roboto Slab\", \"body_font\")\n\ntitle_text &lt;-\"Count of Participants by Number of Cigarettes Smoked\nper Day by Clinical Trials Network (CTN) Trial Number\"\nsubtitle_text &lt;-\"(n=2,487)*\"\ncaption_text &lt;-\"*5 persons excluded due to missing smoking information.\nGraphic: Hannah Cranford | R/Medicine Data Challenge | Data: public.ctn0094data version 1.0.6\"\n\n## Automatically use showtext to render text\nshowtext_auto()\n\nsmoking_df |&gt;\n  mutate(project = fct_recode(\n    project,\n    \"CTN-0027 \\n (n=1,264*)\" = \"27\",\n    \"CTN-0030 \\n (n=653)\" = \"30\",\n    \"CTN-0051 \\n (n=570)\" = \"51\"\n  )) |&gt;\n  mutate(smokestatus = fct_recode(\n    smokestatus,\n    \"&lt;11\"= \"1\",\n    \"11-20\" = \"2\",\n    \"21-30\" =\"3\",\n    \"31+\"=\"4\",\n    \"Non-smoker\"= \"0\"\n  )) |&gt;\n  mutate(\n    smokestatus = fct_relevel(\n      smokestatus,\"Non-smoker\", \"&lt;11\", \"11-20\", \"21-30\",\n      \"31+\")) |&gt;\n    ggplot(aes(fill = smokestatus, values = n)) +\n  geom_waffle(color = \"white\", size = .25, n_rows = 20, flip = TRUE) +\n  facet_wrap(~project, nrow = 1, strip.position = \"bottom\") +\n  scale_x_discrete() +\n  scale_y_continuous(labels = function(x) x * 20, # make this multiplyer the same as n_rows\n                     expand = c(0,0))+\n  MetBrewer::scale_fill_met_d(\"Isfahan2\", direction=1)+\n  coord_equal()+\n  labs(title = title_text,\n       caption = caption_text\n         )+\n  theme_minimal()+\n  theme(\n    axis.title = element_blank(),\n    axis.text.x = element_text(\n      family = body_font, size=9),\n    axis.text.y = element_text(\n      family = body_font, size=9),\n    # Legend\n    legend.position = \"top\",\n    legend.title = element_blank(),\n    legend.spacing = unit(0.2, 'cm'),\n    legend.key.height= unit(0.2, 'cm'),\n    legend.key.width= unit(0.5, 'cm'),\n    legend.text = element_text(family = \"body_font\",\n                               size=9,\n                               face = 'plain',\n                               color = \"grey10\"),\n    # TITLE\n    plot.title.position = \"plot\",\n    plot.title = element_text(margin = margin(1, 0, 5, 0),\n                                 size = 16,\n                                 family = \"title_font\",\n                                 face = \"bold\",\n                                 hjust= 0.5\n                              ),\n    # Caption\n    plot.caption = element_text(family=\"body_font\",\n                                face=\"plain\",\n                                size=6,\n                                color=\"grey40\",\n                                hjust=0.5,\n                                margin=margin(10,0,0,0)),\n\n    plot.background = element_rect(color=\"white\", fill=\"white\"),\n    plot.margin = margin(20, 40, 20, 40)\n\n    )"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  }
]